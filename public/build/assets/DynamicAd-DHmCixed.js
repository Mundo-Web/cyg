import{j as t}from"./RequirementCard-DEdD30eg.js";import{r as a}from"./index-RYns6xqu.js";import{W as h}from"./Header-CmYtnd67.js";const y=({correlative:r,className:c="",fallbackContent:f=null,onAdLoad:n=null,showWhatsAppButton:i=!1})=>{const[e,d]=a.useState(null),[p,o]=a.useState(!0),[x,g]=a.useState(null);a.useEffect(()=>{(async()=>{if(!r){o(!1);return}try{o(!0);const s=await fetch(`/api/ads/by-correlative/${r}`);if(s.ok){const u=await s.json();d(u),n&&n(u)}else if(s.status===404)d(null);else throw new Error("Error al cargar el anuncio")}catch(s){console.error("Error fetching ad:",s),g(s.message)}finally{o(!1)}})()},[r,n]);const m=()=>{e!=null&&e.link&&window.open(e.link,"_blank")};return p?t.jsx("div",{className:`animate-pulse bg-gray-200 rounded-lg ${c}`,children:t.jsx("div",{className:"h-full flex items-center justify-center",children:t.jsx("span",{className:"text-gray-500",children:"Cargando..."})})}):x||!e?f||null:t.jsxs("div",{className:`relative font-paragraph rounded-lg shadow-xl overflow-hidden flex flex-col transition-all duration-300 z-10 ${c}`,children:[(e.name||e.description)&&t.jsx("div",{className:"absolute inset-0 transition-opacity duration-300 pointer-events-none",style:{background:"linear-gradient(to top, rgba(0,0,0,0.7), transparent)"}}),t.jsx("img",{src:e.image?`/api/ads/media/${e.image}`:"/assets/img/placeholder.png",alt:e.name||"Anuncio",className:"w-full h-full object-cover cursor-pointer",onClick:m,onError:l=>{l.target.onerror=null,l.target.src="https://placehold.co/600x400/cccccc/808080?text=Imagen+no+disponible"}}),(e.name||e.description||i)&&t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white z-20",children:[e.name&&t.jsx("h3",{className:"text-xl font-medium mb-2",children:e.name}),e.description&&t.jsx("p",{className:"text-sm mb-4 opacity-90",children:e.description}),i&&e.whatsapp_message&&t.jsx(h,{variant:"constrast",className:"bg-constrast flex items-center gap-2 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-red-600 transition duration-300 ease-in-out text-sm sm:text-base w-full justify-center",customMessage:e.whatsapp_message,children:"Más información"}),e.link&&!i&&t.jsx("button",{onClick:m,className:"bg-constrast text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-red-600 transition duration-300 ease-in-out text-sm sm:text-base w-full",children:"Ver más"})]})]})};export{y as D};
